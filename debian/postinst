#!/bin/sh

set -e

if [ "$1" = "configure" ]; then
    # Create the user radxa 
    systemd-sysusers || true
    # Create tempfiles
    systemd-tmpfiles --create || true
    if [ -e /etc/lightdm/lightdm.conf ]; then
        sed -i -e s/"#autologin-user="/"autologin-user=oem"/g /etc/lightdm/lightdm.conf
        sed -i -e s/"#autologin-user-timeout=0"/"autologin-user-timeout=0"/g /etc/lightdm/lightdm.conf
        sed -i -e s/"#autologin-session="/"autologin-session=xfce"/g /etc/lightdm/lightdm.conf
    fi

    if [ -e /etc/gdm3/daemon.conf ]; then
        sed -i s/"\[daemon\]"/"\[daemon\]\nAutomaticLogin=oem\nAutomaticLoginEnable=True"/g /etc/gdm3/daemon.conf
    fi
fi

#DEBHELPER#

exit 0
